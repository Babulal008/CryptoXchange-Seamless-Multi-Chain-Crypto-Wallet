(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[358],{240:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/pin-or-fingerprint",function(){return a(811)}])},811:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(7876),r=a(4232),i=a(4e3),o=a(4705);function l(){let[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(!1),s=(0,i.useRouter)(),c=(0,i.useSearchParams)(),d=c.get("email"),u=c.get("publicKey"),h=c.get("privateKey"),p=c.get("mnemonic");(0,r.useEffect)(()=>{(async()=>{if(d)try{let e=await fetch("https://walletbe.stellans.com/has-pin?email=".concat(d)),t=await e.json();l(t.hasPin)}catch(e){console.error("Error checking PIN:",e)}})()},[d]);let m=a=>{e.length<6&&t(e+a)},g=()=>{t(e.slice(0,-1))},b=async()=>{if(6!==e.length)return void alert("PIN must be 6 digits long");if(!d)return void alert("Email is missing");try{if(a){let t=await fetch("https://walletbe.stellans.com/validate-pin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,pin:e})}),a=await t.json();if(!t.ok)return void alert(a.error||"Invalid PIN");localStorage.setItem("userPin",e),s.push("/CryptoWalletDashboard?email=".concat(d,"&publicKey=").concat(a.publicKey,"&privateKey=").concat(encodeURIComponent(h),"&mnemonic=").concat(encodeURIComponent(p)))}else{let t=await fetch("https://walletbe.stellans.com/set-pin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,pin:e})}),a=await t.json();if(!t.ok)return void alert(a.error||"Failed to set PIN");localStorage.setItem("userPin",e),alert("PIN set successfully!"),s.push("/CryptoWalletDashboard?email=".concat(d,"&publicKey=").concat(u,"&privateKey=").concat(encodeURIComponent(h),"&mnemonic=").concat(encodeURIComponent(p)))}}catch(e){console.error("PIN error:",e),alert("Network or server error.")}};return(0,n.jsxs)("div",{className:"relative min-h-screen flex items-center justify-center bg-black text-white px-4 py-8 overflow-hidden",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-[url('/asserts/bg.png')] bg-cover bg-center z-0"}),(0,n.jsxs)(o.P.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative z-10 w-full max-w-md bg-white/10 backdrop-blur-lg rounded-xl p-8 text-center shadow-lg",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-green-300 mb-4",children:a?"Enter Your PIN":"Set Up a New PIN"}),(0,n.jsx)("div",{className:"flex justify-center space-x-2 mb-8",children:[...Array(6)].map((t,a)=>(0,n.jsx)("div",{className:"w-4 h-4 rounded-full border-2 transition-all ".concat(e.length>a?"bg-green-400 border-green-400":"border-gray-400")},a))}),(0,n.jsx)("div",{className:"grid grid-cols-3 gap-4 w-60 mx-auto mb-6",children:[1,2,3,4,5,6,7,8,9,"",0,"←"].map((e,t)=>""===e?(0,n.jsx)("div",{},t):(0,n.jsx)("button",{onClick:()=>"←"===e?g():m(e.toString()),className:"w-full h-14 bg-white/20 hover:bg-white/30 text-xl text-white rounded-lg backdrop-blur transition",children:e},t))}),(0,n.jsx)("button",{onClick:b,className:"w-60 bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg font-semibold transition",children:a?"Unlock Wallet":"Set PIN"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[360,636,593,792],()=>t(240)),_N_E=e.O()}]);