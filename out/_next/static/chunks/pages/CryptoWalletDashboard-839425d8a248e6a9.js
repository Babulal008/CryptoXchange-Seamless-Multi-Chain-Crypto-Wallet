(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[820],{1514:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/CryptoWalletDashboard",function(){return t(5127)}])},5127:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(7876),l=t(4232),n=t(9099),r=t(5579);let c=()=>{let[e,a]=(0,l.useState)(!1),[t,c]=(0,l.useState)(""),[i,o]=(0,l.useState)("https://themewagon.github.io/pluto/images/layout_img/user_img.jpg"),[d,m]=(0,l.useState)("John Doe"),[u,h]=(0,l.useState)(null),[g,x]=(0,l.useState)([]),p=(0,n.useRouter)(),{email:b,publicKey:j,privateKey:f,mnemonic:N}=p.query;(0,l.useEffect)(()=>{if(b&&j&&f&&N){c(b);let e=new r.Ng("https://api.devnet.solana.com","confirmed"),a=new r.J3(j),t=async()=>{try{let t=await e.getSignaturesForAddress(a,{limit:10}),s=await Promise.all(t.map(async a=>{var t;let s=await e.getTransaction(a.signature,{maxSupportedTransactionVersion:0});return{signature:a.signature,date:new Date(1e3*a.blockTime).toLocaleString(),status:a.confirmationStatus,amount:(null==s||null==(t=s.meta)?void 0:t.postBalances)?(s.meta.postBalances[0]-s.meta.preBalances[0])/1e9:0}}));x(s)}catch(e){console.error("Error fetching transactions:",e)}};(async()=>{try{let t=await e.getBalance(a);h(t/1e9)}catch(e){console.error("Error fetching SOL balance:",e)}})(),t()}},[b,j,f,N]);let y=async e=>{let a=e.target.files[0];if(a){let e=URL.createObjectURL(a);o(e),localStorage.setItem("userImage",e);let t=new FormData;t.append("image",a);try{let e=await fetch("/api/upload-image",{method:"POST",body:t});if(e.ok){let a=await e.json();console.log("Image uploaded successfully",a)}else console.error("Image upload failed")}catch(e){console.error("Error uploading image:",e)}}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:[(0,s.jsxs)("header",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Crypto Wallet"}),(0,s.jsx)("button",{onClick:()=>{a(!e)},className:"bg-blue-600 px-4 py-2 rounded",children:"Settings"})]}),e&&(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded mb-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Update Profile"}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Upload Image:"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:y})]}),(0,s.jsxs)("p",{children:["Email: ",t]})]}),(0,s.jsx)("section",{className:"bg-gray-800 p-4 rounded mb-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("img",{src:i,alt:"User Avatar",className:"w-12 h-12 rounded-full mr-4"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:d}),(0,s.jsx)("p",{className:"text-gray-400",children:t})]})]})}),(0,s.jsxs)("section",{className:"bg-gray-800 p-4 rounded mb-6",children:[(0,s.jsx)("h3",{className:"text-gray-400 mb-2",children:"Total Balance (SOL)"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:null!==u?"".concat(u.toFixed(4)," SOL"):"Loading..."})]}),(0,s.jsxs)("section",{className:"bg-gray-800 p-4 rounded mb-6",children:[(0,s.jsx)("h3",{className:"text-gray-400 mb-4",children:"Recent Transactions"}),g.length>0?(0,s.jsx)("ul",{children:g.map((e,a)=>(0,s.jsxs)("li",{className:"flex justify-between mb-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white",children:e.date}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:[e.signature.slice(0,20),"..."]})]}),(0,s.jsxs)("div",{className:"".concat(e.amount>0?"text-green-400":e.amount<0?"text-red-400":"text-gray-300"),children:[e.amount>0?"+":"",e.amount.toFixed(6)," SOL"]})]},a))}):(0,s.jsx)("p",{className:"text-gray-400",children:"No transactions found."})]}),(0,s.jsx)("button",{onClick:()=>{p.push({pathname:"/wallet",query:{email:t,publicKey:j,privateKey:f,mnemonic:N}})},className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Go to Wallet"})]})}},7790:()=>{},9099:(e,a,t)=>{e.exports=t(8253)}},e=>{var a=a=>e(e.s=a);e.O(0,[299,909,515,636,593,792],()=>a(1514)),_N_E=e.O()}]);